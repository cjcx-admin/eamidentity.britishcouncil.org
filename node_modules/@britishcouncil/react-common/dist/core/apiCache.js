import {
    SS
} from './LS';
/** Small wrapper that caches API responses. Cache is stored in the Session Storage */
export const ApiCache = {
    /**
     * Gets value from SessionStorage if it's there. If not it will execute second parameter to gather data and then this data will be stored in cache.
     * Please note that using this to cache many requests that have different parameters may have negative effect on performance. Use it wisely
     * @param key Identifier of the resource.
     * @param getData Function that will request data from some API
     * @param params If the call has some parameters that affect results then you need to provide them here
     */
    async getOrCreate(key, getData, params) {
        const sKey = 'API_' + key.toUpperCase() + (params ? .join('_') || '');
        let val = SS.read(sKey);
        if (val) {
            return val;
        }
        val = await getData();
        SS.write(sKey, val);
        return val;
    },
};